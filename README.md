## 薪酬个税计算器（上海）

一个为上海地区场景设计的薪资与个税计算器，支持税前/税后两种计算模式，展示个人与企业五险一金、个税明细与费率摘要。界面采用“青草绿 + Apple 风格”的半透明玻璃材质与胶囊控件。

## 功能特性
- 税前→税后计算、税后→税前反推（二分法，自适应上界）
- 个人/企业缴纳拆分：养老、医疗、失业、公积金；企业含工伤
- 费率配置：
  - 比例支持百分比录入（示例：公积金 7、工伤 0.26 代表 7% 与 0.26%）
  - 缴纳项开关（关闭即按 0 计算）
- 结果展示：主结果三卡、两行费率摘要芯片、个人/企业明细卡
- 可访问性：自定义 Tooltip 即时显示，支持键盘聚焦

## 快速开始
1. 安装依赖：`npm install`
2. 启动开发：`npm run dev`
3. 生产构建：`npm run build` → 预览：`npm run preview`
4. 单元测试：`npm run test`

## 输入与配置说明
- 税前/税后月薪：根据顶部分段控件选择模式进行录入
- 专项附加扣除：默认 0（子女教育、继续教育、住房贷款利息/租金、赡养老人等的月度合计）
- 公积金比例、工伤保险费率：以“百分值”录入（例如 7 表示 7%）；界面显示右侧固定“%”。内部计算会自动换算为小数。
- 缴纳项：养老/医疗/失业/公积金/工伤的开关，关闭后该项按 0 处理，同时相应输入会被禁用、摘要芯片置灰。

## 计算口径与数据来源
- 数据口径：`constants.ts` 基于 2023-2024 上海市公开标准（社保/公积金基数、通用费率区间）
- 社保/公积金基数：以税前月薪为基础，在上下限之间进行钳制
- 个人所得税：采用年度超额累进税率表（快速扣除数为年值），先算年后除以 12 得到月税额——该口径为“简化口径”，与实际“累计预扣法”存在差异，结果仅供参考
- 舍入：所有金额在服务层按“分”四舍五入统一处理，避免显示与累计不一致

## 主题与样式
- 主题：`index.html` 中用 CSS 变量定义品牌绿（Apple Green #34C759）与玻璃材质参数
- 组件：
  - `glass-card` 半透明卡片 + 模糊 + 发丝描边
  - `pill-btn` 胶囊按钮（已修复文本垂直居中）
  - `segmented/segm-item` 分段控件（选中片段主色填充）
  - `input-field` 输入焦点环与描边统一
- Tooltip：自定义 `.tooltip`，悬浮或聚焦即时显示（替代浏览器原生 title 的延迟）
- Tailwind：当前使用 CDN 快速集成；生产建议切换到本地构建并启用裁剪（purge）

## 脚本
- 开发：`npm run dev`
- 构建：`npm run build`
- 预览：`npm run preview`
- 测试：`npm run test`

## 免责声明
本项目仅用于学习与参考，计算结果可能与企业实操或税局口径存在差异（尤其是累计预扣法、补充/自愿缴纳、地区政策调整等）。请结合实际情况与最新政策核对。

## 未来规划
- 增加“累计预扣法”口径并支持切换
- Tailwind 本地化主题与暗色模式适配
- 更丰富的测试用例（边界、随机回归）与可视化（进度条/图表）
